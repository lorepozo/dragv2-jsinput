<html><head><meta pageName="author" content="Lucas Morales, RELATE MIT" /><style>p{font-size:1.3em;line-height:1.5em;padding:0;margin:60px 0 40px;font-family:'helvetica neue',helvetica,arial,sans-serif;font-weight:300;}#modal-overlay{background:#fff;filter:alpha(opacity=60);height:100%;left:0;-moz-opacity:.6;-webkit-opacity:.6;-ms-filter:alpha(opacity=60);opacity:.6;position:absolute;top:0;width:100%;z-index:998}#modal-container{background:#fff;border:1px solid #ababab;box-shadow:0 4px 16px rgba(0,0,0,.2);height:auto;padding:10px;font-family:arial,sans-serif;font-size:14px;position:absolute;z-index:998}#modal-header{height:20px;overflow:hidden;clear:both}#modal-close{float:right;cursor:pointer;display:block;opacity:.6;-moz-opacity:.6;-webkit-opacity:.6;filter:alpha(opacity=60);-ms-filter:alpha(opacity=60);width:0;height:0;border-top:20px solid red;border-left:20px solid transparent}#modal-close:hover{opacity:1;-moz-opacity:1;-webkit-opacity:1;filter:alpha(opacity=100);-ms-filter:alpha(opacity=100)}#modal-content{display:block;padding:0 20px 10px;z-index:999}button{-webkit-background-clip:padding-box;-webkit-box-shadow:#fff 0 1px 0 0 inset;-webkit-font-smoothing:antialiased;background-clip:padding-box;background-color:#eee;background-image:linear-gradient(#eee,#d2d2d2);border:1px solid #cacaca;border-bottom-left-radius:3px;border-bottom-right-radius:3px;border-top-left-radius:3px;border-top-right-radius:3px;box-shadow:inset 0 0 1px #fff;color:#333;cursor:pointer;display:inline-block;font-family:'Open Sans',Verdana,Geneva,sans-serif,sans-serif;font-size:13px;font-weight:400;height:40px;letter-spacing:normal;line-height:normal;margin:0;padding:7px 18px;text-align:center;text-shadow:#f8f8f8 0 1px 0;vertical-align:middle}button:hover{-webkit-box-shadow:#fbfbfb 0 1px 0 0 inset;background-color:#e1e1e1;background-image:linear-gradient(#e1e1e1,#cacaca);box-shadow:#fbfbfb 0 1px 0 0 inset;color:#333}button:active{-webkit-box-shadow:#c3c3c3 0 0 8px 4px inset,#c3c3c3 0 0 8px 4px inset,#eee 0 1px 1px 0;box-shadow:#c3c3c3 0 0 8px 4px inset,#c3c3c3 0 0 8px 4px inset,#eee 0 0 1px 0}.text_box{overflow:auto;display:none;background-color:#faf8ef;margin-bottom:-16px;font-size:.5em;color:#646464;font-family:'Open Sans',Verdana,Geneva,sans-serif,sans-serif}.text_box_contents{margin-left:20px;margin-right:20px;padding-top:5px;padding-bottom:5px}</style></head><body><div class="drag_drop" /><script>(function(d){function m(a,b){(k(a,b)?p:c)(a,b)}var k,c,p;"classList"in document.documentElement?(k=function(a,b){return a.classList.contains(b)},c=function(a,b){a.classList.add(b)},p=function(a,b){a.classList.remove(b)}):(k=function(a,b){return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},c=function(a,b){k(a,b)||(a.className=a.className+" "+b)},p=function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")});var q={hasClass:k,addClass:c,removeClass:p,toggleClass:m,has:k,add:c,remove:p,toggle:m};"function"==typeof define&&define.amd?define("classie/classie",q):d.classie=q})(window);(function(){function d(){}function m(a,b){for(var f=a.length;f--;)if(a[f].listener===b)return f;return-1}function k(a){return function(){return this[a].apply(this,arguments)}}var c=d.prototype,p=this,q=p.EventEmitter;c.getListeners=function(a){var b,f,h=this._getEvents();if(a instanceof RegExp)for(f in b={},h)h.hasOwnProperty(f)&&a.test(f)&&(b[f]=h[f]);else b=h[a]||(h[a]=[]);return b};c.flattenListeners=function(a){var b,f=[];for(b=0;a.length>b;b+=1)f.push(a[b].listener);return f};c.getListenersAsObject=function(a){var b,f=this.getListeners(a);return f instanceof Array&&(b={},b[a]=f),b||f};c.addListener=function(a,b){var f,h=this.getListenersAsObject(a),e="object"==typeof b;for(f in h)h.hasOwnProperty(f)&&-1===m(h[f],b)&&h[f].push(e?b:{listener:b,once:!1});return this};c.on=k("addListener");c.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};c.once=k("addOnceListener");c.defineEvent=function(a){return this.getListeners(a),this};c.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this};c.removeListener=function(a,b){var f,h,e=this.getListenersAsObject(a);for(h in e)e.hasOwnProperty(h)&&(f=m(e[h],b),-1!==f&&e[h].splice(f,1));return this};c.off=k("removeListener");c.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};c.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};c.manipulateListeners=function(a,b,f){var h,e,g=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(h=f.length;h--;)g.call(this,b,f[h]);else for(h in b)b.hasOwnProperty(h)&&(e=b[h])&&("function"==typeof e?g.call(this,h,e):a.call(this,h,e));return this};c.removeEvent=function(a){var b,f=typeof a,h=this._getEvents();if("string"===f)delete h[a];else if(a instanceof RegExp)for(b in h)h.hasOwnProperty(b)&&a.test(b)&&delete h[b];else delete this._events;return this};c.removeAllListeners=k("removeEvent");c.emitEvent=function(a,b){var f,h,e,g,c=this.getListenersAsObject(a);for(e in c)if(c.hasOwnProperty(e))for(h=c[e].length;h--;)f=c[e][h],!0===f.once&&this.removeListener(a,f.listener),g=f.listener.apply(this,b||[]),g===this._getOnceReturnValue()&&this.removeListener(a,f.listener);return this};c.trigger=k("emitEvent");c.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};c.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};c._getEvents=function(){return this._events||(this._events={})};d.noConflict=function(){return p.EventEmitter=q,d};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return d}):"object"==typeof module&&module.exports?module.exports=d:this.EventEmitter=d}).call(this);(function(d){function m(c){var a=d.event;return a.target=a.target||a.srcElement||c,a}var k=document.documentElement,c=function(){};k.addEventListener?c=function(c,a,b){c.addEventListener(a,b,!1)}:k.attachEvent&&(c=function(c,a,b){c[a+b]=b.handleEvent?function(){var a=m(c);b.handleEvent.call(b,a)}:function(){var a=m(c);b.call(c,a)};c.attachEvent("on"+a,c[a+b])});var p=function(){};k.removeEventListener?p=function(c,a,b){c.removeEventListener(a,b,!1)}:k.detachEvent&&(p=function(c,a,b){c.detachEvent("on"+a,c[a+b]);try{delete c[a+b]}catch(f){c[a+b]=void 0}});k={bind:c,unbind:p};"function"==typeof define&&define.amd?define("eventie/eventie",k):"object"==typeof exports?module.exports=k:d.eventie=k})(this);(function(d){function m(d){if(d){if("string"==typeof c[d])return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var m,a=0,b=k.length;b>a;a++)if(m=k[a]+d,"string"==typeof c[m])return m}}var k=["Webkit","Moz","ms","Ms","O"],c=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return m}):"object"==typeof exports?module.exports=m:d.getStyleProperty=m})(window);(function(d){function m(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function k(a){var b,f=a("boxSizing");return function(){if(f){var a=document.createElement("div");a.style.width="200px";a.style.padding="1px 2px 3px 4px";a.style.borderStyle="solid";a.style.borderWidth="1px 2px 3px 4px";a.style[f]="border-box";var e=document.body||document.documentElement;e.appendChild(a);var c=p(a);b=200===m(c.width);e.removeChild(a)}}(),function(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var e=p(a);if("none"===e.display){for(var g={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=q.length;n>e;e++)g[q[e]]=0;return g}g={};g.width=a.offsetWidth;g.height=a.offsetHeight;for(var n=g.isBorderBox=!(!f||!e[f]||"border-box"!==e[f]),d=0,k=q.length;k>d;d++){var w=q[d],s=e[w];var r=a,u=s;if(c||-1===u.indexOf("%"))s=u;else var s=r.style,l=s.left,x=r.runtimeStyle,y=x&&x.left,s=(y&&(x.left=r.currentStyle.left),s.left=u,u=s.pixelLeft,s.left=l,y&&(x.left=y),u);r=parseFloat(s);g[w]=isNaN(r)?0:r}a=g.paddingLeft+g.paddingRight;d=g.paddingTop+g.paddingBottom;k=g.marginLeft+g.marginRight;w=g.marginTop+g.marginBottom;r=g.borderLeftWidth+g.borderRightWidth;u=g.borderTopWidth+g.borderBottomWidth;n=n&&b;s=m(e.width);!1!==s&&(g.width=s+(n?0:a+r));e=m(e.height);return!1!==e&&(g.height=e+(n?0:d+u)),g.innerWidth=g.width-(a+r),g.innerHeight=g.height-(d+u),g.outerWidth=g.width+k,g.outerHeight=g.height+w,g}}}var c=d.getComputedStyle,p=c?function(a){return c(a,null)}:function(a){return a.currentStyle},q="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],k):"object"==typeof exports?module.exports=k(require("get-style-property")):d.getSize=k(d.getStyleProperty)})(window);(function(d){function m(a,b){for(var c in b)a[c]=b[c];return a}function k(){}function c(a,c,e,h,n){function l(a,b){this.element="string"==typeof a?q.querySelector(a):a;this.options=m({},this.options);m(this.options,b);this._create()}function v(){return!1}function p(a,b){a.x=void 0!==b.pageX?b.pageX:b.clientX;a.y=void 0!==b.pageY?b.pageY:b.clientY}function A(a,b,e){return e=e||"round",b?Math[e](a/b)*b:a}var z=h("transform");h=!!h("perspective");m(l.prototype,c.prototype);l.prototype.options={};l.prototype._create=function(){this.position={};this._getPosition();this.startPoint={x:0,y:0};this.dragPoint={x:0,y:0};this.startPosition=m({},this.position);var a=b(this.element);"relative"!==a.position&&"absolute"!==a.position&&(this.element.style.position="relative");this.enable();this.setHandles()};l.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];for(var a=0,b=this.handles.length;b>a;a++){var c=this.handles[a];d.navigator.pointerEnabled?(e.bind(c,"pointerdown",this),c.style.touchAction="none"):d.navigator.msPointerEnabled?(e.bind(c,"MSPointerDown",this),c.style.msTouchAction="none"):(e.bind(c,"mousedown",this),e.bind(c,"touchstart",this),B(c))}};var B="attachEvent"in q.documentElement?function(a){"IMG"===a.nodeName&&(a.ondragstart=v);a=a.querySelectorAll("img");for(var b=0,c=a.length;c>b;b++)a[b].ondragstart=v}:k;l.prototype._getPosition=function(){var a=b(this.element),c=parseInt(a.left,10),e=parseInt(a.top,10);this.position.x=isNaN(c)?0:c;this.position.y=isNaN(e)?0:e;this._addTransformPosition(a)};l.prototype._addTransformPosition=function(a){if(z){var b=a[z];if(0===b.indexOf("matrix")){a=b.split(",");var c=0===b.indexOf("matrix3d")?12:4,b=parseInt(a[c],10);a=parseInt(a[c+1],10);this.position.x+=b;this.position.y+=a}}};l.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)};l.prototype.getTouch=function(a){for(var b=0,c=a.length;c>b;b++){var e=a[b];if(e.identifier===this.pointerIdentifier)return e}};l.prototype.onmousedown=function(a){var b=a.button;b&&0!==b&&1!==b||this.dragStart(a,a)};l.prototype.ontouchstart=function(a){this.isDragging||this.dragStart(a,a.changedTouches[0])};l.prototype.onMSPointerDown=l.prototype.onpointerdown=function(a){this.isDragging||this.dragStart(a,a)};var C={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};l.prototype.dragStart=function(b,c){this.isEnabled&&(b.preventDefault?b.preventDefault():b.returnValue=!1,this.pointerIdentifier=void 0!==c.pointerId?c.pointerId:c.identifier,this._getPosition(),this.measureContainment(),p(this.startPoint,c),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this._bindEvents({events:C[b.type],node:b.preventDefault?d:q}),a.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,b,c]),this.animate())};l.prototype._bindEvents=function(a){for(var b=0,c=a.events.length;c>b;b++)e.bind(a.node,a.events[b],this);this._boundEvents=a};l.prototype._unbindEvents=function(){var a=this._boundEvents;if(a&&a.events){for(var b=0,c=a.events.length;c>b;b++)e.unbind(a.node,a.events[b],this);delete this._boundEvents}};l.prototype.measureContainment=function(){var a=this.options.containment;if(a){this.size=n(this.element);var b=this.element.getBoundingClientRect(),a=f(a)?a:"string"==typeof a?q.querySelector(a):this.element.parentNode;this.containerSize=n(a);a=a.getBoundingClientRect();this.relativeStartPosition={x:b.left-a.left,y:b.top-a.top}}};l.prototype.onmousemove=function(a){this.dragMove(a,a)};l.prototype.onMSPointerMove=l.prototype.onpointermove=function(a){a.pointerId===this.pointerIdentifier&&this.dragMove(a,a)};l.prototype.ontouchmove=function(a){var b=this.getTouch(a.changedTouches);b&&this.dragMove(a,b)};l.prototype.dragMove=function(a,b){p(this.dragPoint,b);var c=this.dragPoint.x-this.startPoint.x,e=this.dragPoint.y-this.startPoint.y,g=this.options.grid,f=g&&g[0],g=g&&g[1],c=A(c,f),e=A(e,g),c=this.containDrag("x",c,f),e=this.containDrag("y",e,g),c="y"===this.options.axis?0:c,e="x"===this.options.axis?0:e;this.position.x=this.startPosition.x+c;this.position.y=this.startPosition.y+e;this.dragPoint.x=c;this.dragPoint.y=e;this.emitEvent("dragMove",[this,a,b])};l.prototype.containDrag=function(a,b,c){if(!this.options.containment)return b;var e="x"===a?"width":"height",g=this.relativeStartPosition[a];a=A(-g,c,"ceil");e=this.containerSize[e]-g-this.size[e];return e=A(e,c,"floor"),Math.min(e,Math.max(a,b))};l.prototype.onmouseup=function(a){this.dragEnd(a,a)};l.prototype.onMSPointerUp=l.prototype.onpointerup=function(a){a.pointerId===this.pointerIdentifier&&this.dragEnd(a,a)};l.prototype.ontouchend=function(a){var b=this.getTouch(a.changedTouches);b&&this.dragEnd(a,b)};l.prototype.dragEnd=function(b,c){this.isDragging=!1;delete this.pointerIdentifier;z&&(this.element.style[z]="",this.setLeftTop());this._unbindEvents();a.remove(this.element,"is-dragging");this.emitEvent("dragEnd",[this,b,c])};l.prototype.onMSPointerCancel=l.prototype.onpointercancel=function(a){a.pointerId===this.pointerIdentifier&&this.dragEnd(a,a)};l.prototype.ontouchcancel=function(a){var b=this.getTouch(a.changedTouches);this.dragEnd(a,b)};l.prototype.animate=function(){if(this.isDragging){this.positionDrag();var a=this;g(function(){a.animate()})}};var D=h?function(a,b){return"translate3d( "+a+"px, "+b+"px, 0)"}:function(a,b){return"translate( "+a+"px, "+b+"px)"};return l.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px";this.element.style.top=this.position.y+"px"},l.prototype.positionDrag=z?function(){this.element.style[z]=D(this.dragPoint.x,this.dragPoint.y)}:l.prototype.setLeftTop,l.prototype.enable=function(){this.isEnabled=!0},l.prototype.disable=function(){this.isEnabled=!1;this.isDragging&&this.dragEnd()},l}for(var p,q=d.document,a=q.defaultView,b=a&&a.getComputedStyle?function(b){return a.getComputedStyle(b,null)}:function(a){return a.currentStyle},f="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},h=0,e=["webkit","moz","ms","o"],g=d.requestAnimationFrame,n=d.cancelAnimationFrame,v=0;e.length>v&&(!g||!n);v++)p=e[v],g=g||d[p+"RequestAnimationFrame"],n=n||d[p+"CancelAnimationFrame"]||d[p+"CancelRequestAnimationFrame"];g&&n||(g=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-h)),e=d.setTimeout(function(){a(b+c)},c);return h=b+c,e},n=function(a){d.clearTimeout(a)});"function"==typeof define&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],c):d.Draggable=c(d.classie,d.EventEmitter,d.eventie,d.getStyleProperty,d.getSize)})(window);var Channel=function(){function d(a,b,f,h){function e(b){for(var c=0;c<b.length;c++)if(b[c].win===a)return!0;return!1}var g=!1;if("*"===b)for(var n in c){if(c.hasOwnProperty(n)&&"*"!==n&&"object"===typeof c[n][f]&&(g=e(c[n][f])))break}else c["*"]&&c["*"][f]&&(g=e(c["*"][f])),!g&&c[b]&&c[b][f]&&(g=e(c[b][f]));if(g)throw"A channel is already bound to the same window which overlaps with origin '"+b+"' and has scope '"+f+"'";"object"!=typeof c[b]&&(c[b]={});"object"!=typeof c[b][f]&&(c[b][f]=[]);c[b][f].push({win:a,handler:h})}function m(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var k=Math.floor(1000001*Math.random()),c={},p={},q=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(f){return}var h=a.source;a=a.origin;var e,g,n;"string"===typeof b.method&&(n=b.method.split("::"),2==n.length?(e=n[0],n=n[1]):n=b.method);"undefined"!==typeof b.id&&(g=b.id);if("string"===typeof n){g=!1;if(c[a]&&c[a][e])for(var d=0;d<c[a][e].length;d++)if(c[a][e][d].win===h){c[a][e][d].handler(a,n,b);g=!0;break}if(!g&&c["*"]&&c["*"][e])for(d=0;d<c["*"][e].length;d++)if(c["*"][e][d].win===h){c["*"][e][d].handler(a,n,b);break}}else if("undefined"!=typeof g&&p[g])p[g](a,n,b)};window.addEventListener?window.addEventListener("message",q,!1):window.attachEvent&&window.attachEvent("onmessage",q);return{build:function(a){var b=function(b){if(a.debugOutput&&window.console&&window.console.log){try{"string"!==typeof b&&(b=JSON.stringify(b))}catch(c){}console.log("["+e+"] "+b)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof a)throw"Channel build invoked without a proper object argument";if(!a.window||!a.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===a.window)throw"target window is same as present window -- not allowed";var f=!1;if("string"===typeof a.origin){var h;"*"===a.origin?f=!0:null!==(h=a.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(a.origin=h[0].toLowerCase(),f=!0)}if(!f)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof a.scope){if("string"!==typeof a.scope)throw"scope, when specified, must be a string";if(1<a.scope.split("::").length)throw"scope may not contain double colons: '::'";}var e=function(){for(var a="",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return a}(),g={},n={},v={},q=!1,w=[],s=function(a,b,c){var e=!1,g=!1;return{origin:b,invoke:function(b,e){if(!v[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var g=!1,d=0;d<c.length;d++)if(b===c[d]){g=!0;break}if(!g)throw"request supports no such callback '"+b+"'";x({id:a,callback:b,params:e})},error:function(b,c){g=!0;if(!v[a])throw"error called for nonexistent message: "+a;delete v[a];x({id:a,error:b,message:c})},complete:function(b){g=!0;if(!v[a])throw"complete called for nonexistent message: "+a;delete v[a];x({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(e=!0===a);return e},completed:function(){return g}}},r=function(a,b,c){return window.setTimeout(function(){n[a]&&(n[a].error("timeout_error","timeout ("+b+"ms) exceeded on method '"+c+"'"),delete n[a],delete p[a])},b)},u=function(c,e,d){if("function"===typeof a.gotMessageObserver)try{a.gotMessageObserver(c,d)}catch(f){b("gotMessageObserver() raised an exception: "+f.toString())}if(d.id&&e){if(g[e]){var h=s(d.id,c,d.callbacks?d.callbacks:[]);v[d.id]={};try{if(d.callbacks&&m(d.callbacks)&&0<d.callbacks.length)for(c=0;c<d.callbacks.length;c++){for(var k=d.callbacks[c],l=d.params,q=k.split("/"),w=0;w<q.length-1;w++){var r=q[w];"object"!==typeof l[r]&&(l[r]={});l=l[r]}l[q[q.length-1]]=function(){var a=k;return function(b){return h.invoke(a,b)}}()}var u=g[e](h,d.params);h.delayReturn()||h.completed()||h.complete(u)}catch(t){e="runtime_error";d=null;"string"===typeof t?d=t:"object"===typeof t&&(t&&m(t)&&2==t.length?(e=t[0],d=t[1]):"string"===typeof t.error&&(e=t.error,t.message?"string"===typeof t.message?d=t.message:t=t.message:d=""));if(null===d)try{d=JSON.stringify(t),"undefined"==typeof d&&(d=t.toString())}catch(x){d=t.toString()}h.error(e,d)}}}else if(d.id&&d.callback)if(n[d.id]&&n[d.id].callbacks&&n[d.id].callbacks[d.callback])n[d.id].callbacks[d.callback](d.params);else b("ignoring invalid callback, id:"+d.id+" ("+d.callback+")");else if(d.id)n[d.id]?(d.error?n[d.id].error(d.error,d.message):void 0!==d.result?n[d.id].success(d.result):n[d.id].success(),delete n[d.id],delete p[d.id]):b("ignoring invalid response: "+d.id);else if(e&&g[e])g[e]({origin:c},d.params)};d(a.window,a.origin,"string"===typeof a.scope?a.scope:"",u);var l=function(b){"string"===typeof a.scope&&a.scope.length&&(b=[a.scope,b].join("::"));return b},x=function(c,e){if(!c)throw"postMessage called with null message";b((q?"post  ":"queue ")+" message: "+JSON.stringify(c));if(e||q){if("function"===typeof a.postMessageObserver)try{a.postMessageObserver(a.origin,c)}catch(d){b("postMessageObserver() raised an exception: "+d.toString())}a.window.postMessage(JSON.stringify(c),a.origin)}else w.push(c)},y={unbind:function(a){if(g[a]){if(!delete g[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";if(g[a])throw"method '"+a+"' is already bound!";g[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},c=[],e=[],d=function(a,g){if(0<=e.indexOf(g))throw"params cannot be a recursive data structure";e.push(g);if("object"===typeof g)for(var h in g)if(g.hasOwnProperty(h)){var f=a+(a.length?"/":"")+h;"function"===typeof g[h]?(b[f]=g[h],c.push(f),delete g[h]):"object"===typeof g[h]&&d(f,g[h])}};d("",a.params);var g={id:k,method:l(a.method),params:a.params};c.length&&(g.callbacks=c);a.timeout&&r(k,a.timeout,l(a.method));n[k]={callbacks:b,error:a.error,success:a.success};p[k]=u;k++;x(g)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";x({method:l(a.method),params:a.params})},destroy:function(){for(var d=a.window,h=a.origin,f="string"===typeof a.scope?a.scope:"",k=c[h][f],l=0;l<k.length;l++)k[l].win===d&&k.splice(l,1);0===c[h][f].length&&delete c[h][f];window.removeEventListener?window.removeEventListener("message",u,!1):window.detachEvent&&window.detachEvent("onmessage",u);q=!1;g={};v={};n={};a.origin=null;w=[];b("channel destroyed");e=""}};y.bind("__ready",function(c,d){b("ready msg received");if(q)throw"received ready message while in ready state.  help!";e="ping"===d?e+"-R":e+"-L";y.unbind("__ready");q=!0;b("ready msg accepted.");for("ping"===d&&y.notify({method:"__ready",params:"pong"});w.length;)x(w.pop());if("function"===typeof a.onReady)a.onReady(y)});setTimeout(function(){x({method:l("__ready"),params:"ping"},!0)},0);return y}}}();var Modal=function(){var c={},e={},b=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),d=document.createElement("div"),g=document.createElement("div");c.open=function(l){e.width=l.width||"auto";e.height=l.height||"auto";d.innerHTML=l.content||"";a.style.width=e.width;a.style.height=e.height;b.style.display="block";a.style.display="block";document.onkeypress=function(a){27===a.keyCode&&!0!==e.lock&&c.close()};g.onclick=c.close;b.onclick=c.close;window.addEventListener?window.addEventListener("resize",void 0,!1):window.attachEvent&&window.attachEvent("onresize",void 0);f.onmousedown=function(){return!1};c.center({})};c.close=function(){d.innerHTML="";b.setAttribute("style","");b.style.cssText="";b.style.display="none";a.setAttribute("style","");a.style.cssText="";a.style.display="none";f.style.cursor="default";g.setAttribute("style","");g.style.cssText="";window.removeEventListener?window.removeEventListener("resize",void 0,!1):window.detachEvent&&window.detachEvent("onresize",void 0)};c.center=function(c){var e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),f=Math.max(a.clientWidth,a.offsetWidth),g=Math.max(a.clientHeight,a.offsetHeight),d=0,m=0,h=0,k=0;"number"===typeof window.innerWidth?(d=window.innerWidth,m=window.innerHeight):document.documentElement&&document.documentElement.clientWidth&&(d=document.documentElement.clientWidth,m=document.documentElement.clientHeight);"number"===typeof window.pageYOffset?(k=window.pageYOffset,h=window.pageXOffset):document.body&&document.body.scrollLeft?(k=document.body.scrollTop,h=document.body.scrollLeft):document.documentElement&&document.documentElement.scrollLeft&&(k=document.documentElement.scrollTop,h=document.documentElement.scrollLeft);a.style.top=k+m/2-g/2+"px";a.style.left=h+d/2-f/2+"px";b.style.height=e+"px";b.style.width="100%"};b.setAttribute("id","modal-overlay");a.setAttribute("id","modal-container");f.setAttribute("id","modal-header");d.setAttribute("id","modal-content");g.setAttribute("id","modal-close");f.appendChild(g);a.appendChild(f);a.appendChild(d);b.style.display="none";a.style.display="none";window.addEventListener?window.addEventListener("load",function(){document.body.appendChild(b);document.body.appendChild(a)},!1):window.attachEvent&&window.attachEvent("onload",function(){document.body.appendChild(b);document.body.appendChild(a)});return c}();Element.prototype.css=function(d){for(var m in d)this.style[m]=d[m]};Element.prototype.inParent=function(){var d=this.getBoundingClientRect(),m=this.parentNode.getBoundingClientRect(),k={};k.width=d.width;k.height=d.height;k.top=d.top-m.top;k.left=d.left-m.left;return k};var JSInput=function(){function l(b){var a=JSON.parse(b.getAttribute("d"));return a.reusable&&m(b)?(b=document.createElement("div"),b.setAttribute("name",a.id),b.className="draggable",b.setAttribute("d",JSON.stringify(a)),b.css({backgroundImage:"url("+a.url+")",backgroundSize:String(a.size.width)+"px "+String(a.size.height)+"px",position:"absolute",width:String(a.size.width)+"px",height:String(a.size.height)+"px",left:a.pos.x-a.size.width/2+"px",top:a.pos.y-a.size.height/2+"px"}),document.querySelector(".drop").appendChild(b),a=new Draggable(b,{containment:".drop"}),a.on("dragStart",function(){l(this.handles[0])}),a.on("dragEnd",function(){n(this.handles[0])}),!0):!1}function n(b){var a=JSON.parse(b.getAttribute("d"));b.inParent();m(b)&&(b.css({left:a.pos.x-a.size.width/2+"px",top:a.pos.y-a.size.height/2+"px"}),a.reusable&&b.parentElement.removeChild(b))}function k(b){var a,f,g,e,d=document.createDocumentFragment(),h=document.querySelector(".drop");b||(b={});for(f=0;f<c.inp.draggables.length;f++)if(a=c.inp.draggables[f],b[a.id]||(b[a.id]=[a.pos.x,a.pos.y],a.reusable&&(b[a.id]=[b[a.id]])),a.reusable)for(g=0;g<b[a.id].length;g++)e=document.createElement("div"),c.reusables[a.id]=0,e.setAttribute("name",a.id),e.className="draggable",e.setAttribute("d",JSON.stringify(a)),e.css({backgroundImage:"url("+a.url+")",backgroundSize:String(a.size.width)+"px "+String(a.size.height)+"px",position:"absolute",width:String(a.size.width)+"px",height:String(a.size.height)+"px",left:Number(b[a.id][g][0]-a.size.width/2)+"px",top:Number(b[a.id][g][1]-a.size.height/2)+"px"}),d.appendChild(e);else e=document.createElement("div"),c.reusables[a.id]=0,e.setAttribute("name",a.id),e.className="draggable",e.setAttribute("d",JSON.stringify(a)),e.css({backgroundImage:"url("+a.url+")",backgroundSize:String(a.size.width)+"px "+String(a.size.height)+"px",position:"absolute",width:String(a.size.width)+"px",height:String(a.size.height)+"px",left:Number(b[a.id][0]-a.size.width/2)+"px",top:Number(b[a.id][1]-a.size.height/2)+"px"}),d.appendChild(e);h.innerHTML="";h.appendChild(d);f=0;for(b=document.getElementsByClassName("draggable");f<b.length;f++)a=new Draggable(b[f],{containment:".drop"}),a.on("dragStart",function(){l(this.handles[0])}),a.on("dragEnd",function(){n(this.handles[0])});return!0}function t(b){c.inp=b;var a=document.createElement("div"),f=document.createElement("button"),g=document.createElement("button");document.createElement("div");document.createElement("div");b=document.createElement("style");var e=document.createDocumentFragment(),d="cursor:"+("undefined"==typeof c.inp.cursor?"move":c.inp.cursor),h="undefined"!==typeof c.inp.hoverZoom&&c.inp.hoverZoom?"-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1);":"";a.className="drop";a.css({position:"relative",backgroundImage:"url("+c.inp.drop_image+")",backgroundSize:c.inp.size.width+"px "+c.inp.size.height+"px",width:c.inp.size.width+"px",height:c.inp.size.height+"px"});e.appendChild(a);f.className="resetButton";f.innerHTML="Reset";g.className="helpButton";g.innerHTML="Help";e.appendChild(f);e.appendChild(g);c.help=("undefined"!==typeof c.inp.hoverZoom&&c.inp.hoverZoom?"Items that are draggable will expand when your mouse hovers over them.<br>":"")+'Move draggable items to their correct targets.<br>If no correct target exists for an item, move the item back to its original location and it will snap into place. Alternatively, you can use the "Reset" button to reset all draggables.<br>Click out of this box or on the red triangle to dismiss.';if("undefined"!==typeof c.inp.css)for(a=0;a<c.inp.css.length;a++)d=d+c.inp.css[a][0]+":"+c.inp.css[a][1]+";";if("undefined"!==typeof inp.hover)for(a=0;a<c.inp.hover.length;a++)h=h+c.inp.hover[a][0]+":"+c.inp.hover[a][1]+";";b.appendChild(document.createTextNode(".draggable{outline: 2px solid transparent;"+d+"}.draggable:hover{"+h+"}"));e.appendChild(b);document.body.appendChild(e);k()}function m(b){var a=b.inParent();b=JSON.parse(b.getAttribute("d"));return Math.abs(a.left+b.size.width/2-b.pos.x)<b.size.width&&Math.abs(a.top+b.size.height/2-b.pos.y)<b.size.height}function p(){var b,a,c,d={},e=document.getElementsByClassName("draggable");for(b=0;b<e.length;b++)c=e[b],a=JSON.parse(c.getAttribute("d")),c=c.inParent(),c=[c.left+c.width/2,c.top+c.height/2],a.reusable?(d[a.id]||(d[a.id]=[]),d[a.id][d[a.id].length]=c):d[a.id]=c;return JSON.stringify(d)}function q(){return JSON.stringify(c.inp)}function r(){s=JSON.parse(1===arguments.length?arguments[0]:arguments[1]);k(s)}this.inp={};this.reusables={};var c=this,d;d="undefined"!==typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onload=function(){t(JSON.parse(this.responseText));document.querySelector(".resetButton").onclick=k;document.querySelector(".helpButton").onclick=function(){Modal.open({width:"80%",height:"80%",content:"<p>"+(c.inp.help||c.help)+"</p>"})}};d.open("get",decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI("js").replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))+".json",!1);d.send();window.parent!==window&&(d=Channel.build({window:window.parent,origin:"*",scope:"JSInput"}),d.bind("getGrade",q),d.bind("getState",p),d.bind("setState",r));return{getState:p,setState:r,getGrade:q}}();</script></body></html>